<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">

<link rel="import" href="meta-collection-elements/string-meta.html">
<link rel="import" href="meta-collection-elements/int-meta.html">
<link rel="import" href="meta-collection-elements/date-time-meta.html">

<dom-module id="meta-collection-builder">
  <template>
    <style type="text/css">

      #content-wrapper{
        display:table;
        width: 80%;
        min-width: 1100px;
        max-width: 1300px;
        position: relative;
        margin: 20px auto 0 auto;
        display:table;
      }

      #content{
        display:table-row;
      }

      #content>div{
        display:table-cell
      }

      #metaTypes{
        width:200px;
        background:yellow;
      }

      #metaCollection{
        background:blue;
      }

      #metaCollectionSortable
      {
        display: inline-block;
        min-height: 100px;
      }

      #metaTypesSortable > *
      {
        width:190px;
        display: inline-block; 
        padding-left: 10px;
        cursor: move;
      }

      #metaTypesSortable
      {
        width:200px;
        display: inline-block;
      }

    </style>


    <div id="content-wrapper">
      <div id="content">
        <div id="metaTypes">
          <sortable-js id="metaTypesSortable">
              <string-meta></string-meta>
              <div>test</div>
          </sortable-js>  
        </div>
        <div id="metaCollection">
          <sortable-js id="metaCollectionSortable">
            &nbsp;
          </sortable-js>
        </div>
      </div>
    </div>


  </template>

  <script>

    Polymer({

      is: 'meta-collection-builder',
      ready: function() {

        this.$.metaTypesSortable.group = {
          name: this.$.metaTypesSortable.id,
          pull: 'clone'
        };

        this.$.metaTypesSortable.sort = false;

        this.$.metaCollectionSortable.group = {
          name: this.$.metaCollectionSortable.id, 
          put: [this.$.metaTypesSortable.group.name]
        };

        this.$.metaCollection.addEventListener('add', this.addMeta);
      },
      addMeta: function(event){
        if(event.item)
        {
          var typedMeta = event.item.shadowRoot.querySelector('typed-meta');
          typedMeta.showMetaInputConfigurationTemplate();
        }
      }
    });

    

  </script>

</dom-module>
